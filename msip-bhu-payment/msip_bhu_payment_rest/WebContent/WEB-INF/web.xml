<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  	<display-name>msip_bhu_payment_rest</display-name>
	<!-- Spring ApplicationContext配置文件的路径�,可使用通配符，多个路径用�1,号分隔
	  此参数用于后面的Spring-Context loader -->
	<context-param>
		<param-name>contextConfigLocation</param-name>
		<param-value>
			classpath*:spring/appCtx.xml
			<!-- 
			classpath*:springsecurity/applicationContext-security.xml
			 -->
		</param-value>
	</context-param>
	<!-- 默认i18n资源文件 -->
	<context-param>
		<param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
		<param-value>i18n/messages</param-value>
	</context-param>
	
	<!-- 著名 Character Encoding filter -->
	<filter>
		<filter-name>encodingFilter</filter-name>
		<filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
		<init-param>
			<param-name>encoding</param-name>
			<param-value>UTF-8</param-value>
		</init-param>
		<init-param>
			<param-name>forceEncoding</param-name>
			<param-value>true</param-value>
		</init-param>
	</filter>
	<!-- SpringSecurity filter 
	<filter>
		<filter-name>springSecurityFilterChain</filter-name>
		<filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>springSecurityFilterChain</filter-name>
		<url-pattern>/*</url-pattern>
		<dispatcher>REQUEST</dispatcher>
		<dispatcher>FORWARD</dispatcher>
	</filter-mapping>		
	-->
	
	<filter-mapping>
		<filter-name>encodingFilter</filter-name>
		<url-pattern>/*</url-pattern>
		<dispatcher>REQUEST</dispatcher>
		<dispatcher>FORWARD</dispatcher>
	</filter-mapping>	

	<!--Spring ApplicationContext 载入 -->
	<listener>
		<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
	</listener>

	<!-- 使Spring支持request与session的scope,如:<bean id="loginAction" class="com.foo.LoginAction" scope="request"/> -->
	<listener>
	  <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
	</listener>

	<!-- Spring 刷新Introspector防止内存泄露 -->
	<listener>
		<listener-class>org.springframework.web.util.IntrospectorCleanupListener</listener-class>
	</listener>
  <servlet>
    <servlet-name>springmvc</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>classpath*:/spring/springmvc-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
	
  <servlet-mapping>
    <servlet-name>springmvc</servlet-name>
    
    <url-pattern>/</url-pattern>
    <!--
    <url-pattern>*.html</url-pattern>
    <url-pattern>*.json</url-pattern>
    <url-pattern>*.xml</url-pattern>
    <url-pattern>*.shtml</url-pattern>-->
  </servlet-mapping>

	<!-- 娴忚鍣ㄤ笉鏀寔put,delete绛塵ethod,鐢辫filter灏哶method=delete杞崲涓烘爣鍑嗙殑http delete鏂规硶 -->
	<filter>
		<filter-name>HiddenHttpMethodFilter</filter-name>
		<filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
	</filter>
	
	<filter-mapping>
		<filter-name>HiddenHttpMethodFilter</filter-name>
		<servlet-name>springmvc</servlet-name>
	</filter-mapping>
	
	
	<!-- session超时定义,单位为分钟 -->
	<session-config>
		<session-timeout>30</session-timeout>
	</session-config>

	<!-- servlet映射 -->
	 <servlet>
    <servlet-name>GetAuthorizationServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.GetAuthorizationServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>AuthorizationCaptureServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.AuthorizationCaptureServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>VoidAuthorizationServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.VoidAuthorizationServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>GetCaptureServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.GetCaptureServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>RefundCaptureServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.RefundCaptureServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>PaymentWithCreditCardServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.PaymentWithCreditCardServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>PaymentWithCreditCardServlet</servlet-name>
    <url-pattern>/paymentwithcreditcard</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>ThirdPartyPaymentWithPayPalServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.ThirdPartyPaymentWithPayPalServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ThirdPartyPaymentWithPayPalServlet</servlet-name>
    <url-pattern>/thirdpartypaymentwithpaypal</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>PaymentWithPayPalServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.PaymentWithPayPalServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>PaymentWithPayPalServlet</servlet-name>
    <url-pattern>/paymentwithpaypal</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>UpdatePayment</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.UpdatePaymentServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>UpdatePayment</servlet-name>
    <url-pattern>/updatePayment</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>ReauthorizationServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.ReauthorizationServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>CreateSinglePayoutServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payouts.servlet.CreateSinglePayoutServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>CreateSinglePayoutServlet</servlet-name>
    <url-pattern>/payouts.CreateSinglePayout</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>CreateBatchPayoutServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payouts.servlet.CreateBatchPayoutServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>CreateBatchPayoutServlet</servlet-name>
    <url-pattern>/payouts.CreateBatchPayout</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>GetPayoutBatchStatusServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payouts.servlet.GetPayoutBatchStatusServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>GetPayoutBatchStatusServlet</servlet-name>
    <url-pattern>/payouts.GetPayoutBatchStatus</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>GetPayoutItemStatusServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payouts.servlet.GetPayoutItemStatusServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>GetPayoutItemStatusServlet</servlet-name>
    <url-pattern>/payouts.GetPayoutItemStatus</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>CancelPayoutItemServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payouts.servlet.CancelPayoutItemServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>CancelPayoutItemServlet</servlet-name>
    <url-pattern>/payouts.CancelPayoutItem</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>ReauthorizationServlet</servlet-name>
    <url-pattern>/reauthorization</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>PaymentWithSavedCardServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.PaymentWithSavedCardServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>GetAuthorizationServlet</servlet-name>
    <url-pattern>/getauthorizationservlet</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>AuthorizationCaptureServlet</servlet-name>
    <url-pattern>/authorizationcaptureservlet</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>VoidAuthorizationServlet</servlet-name>
    <url-pattern>/voidauthorizationservlet</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>GetCaptureServlet</servlet-name>
    <url-pattern>/getcaptureservlet</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>RefundCaptureServlet</servlet-name>
    <url-pattern>/refundcaptureservlet</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>PaymentWithSavedCardServlet</servlet-name>
    <url-pattern>/paymentwithsavedcard</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>GetPaymentServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.GetPaymentServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>GetPaymentServlet</servlet-name>
    <url-pattern>/getpayment</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>GetPaymentHistoryServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.GetPaymentHistoryServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>GetPaymentHistoryServlet</servlet-name>
    <url-pattern>/getpaymenthistory</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>GetSaleServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.GetSaleServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>GetSaleServlet</servlet-name>
    <url-pattern>/getsale</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>SaleRefundServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.SaleRefundServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>SaleRefundServlet</servlet-name>
    <url-pattern>/salerefund</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>CreateCreditCardServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.CreateCreditCardServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>CreateCreditCardServlet</servlet-name>
    <url-pattern>/createcreditcard</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>GetCreditCardServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.GetCreditCardServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>GetCreditCardServlet</servlet-name>
    <url-pattern>/getcreditcard</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>ValidateWebhookServlet</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.ValidateWebhookServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ValidateWebhookServlet</servlet-name>
    <url-pattern>/validatewebhook</url-pattern>
  </servlet-mapping>
 <!--  <servlet>
    <description></description>
    <display-name>PaypalNotifySuccess</display-name>
    <servlet-name>PaypalNotifySuccess</servlet-name>
    <servlet-class>com.bhu.vas.web.payments.servlet.PaypalNotifySuccess</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>PaypalNotifySuccess</servlet-name>
    <url-pattern>/payment/paypalNotifySuccess</url-pattern>
  </servlet-mapping> -->

	<!-- 默认首页定义 -->
	<welcome-file-list>
		<welcome-file>index.html</welcome-file>
	</welcome-file-list>	
	<!-- 出错页面定义 -->
	<error-page>
		<exception-type>java.lang.Throwable</exception-type>
		<location>/commons/500</location>
	</error-page>
	<error-page>
		<error-code>500</error-code>
		<location>/commons/500</location>
	</error-page>
	<error-page>
		<error-code>404</error-code>
		<location>/commons/404</location>
	</error-page>
	<error-page>
		<error-code>403</error-code>
		<location>/commons/403</location>
	</error-page>
</web-app>